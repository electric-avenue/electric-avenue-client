<ion-view title="Listings" on-swipe-right="changeState('app.usermap')" ng-init="loadVendors();">
  <ion-content class="hasFilter has-header has-tabs-top">
    <div class="list card" ng-repeat="vendor in data.vendors" item="item" ng-click="showVendor(vendor)">
      <div class="item text-center vendor-item">
        <h2 ng-if="vendor.User.displayname">{{vendor.User.displayname}}</h1>
        <h2 ng-if="!vendor.User.displayname">{{vendor.User.username}}</h1>
        <p>{{vendor.category}}</p>
      </div>
      <div class="item item-body">
        <img class="full-image roundimage" ng-if="!vendor.image" ng-src="http://img3.wikia.nocookie.net/__cb20121227201208/jamesbond/images/6/61/Generic_Placeholder_-_Profile.jpg">
        <img class="full-image roundimage" ng-if="vendor.image" ng-src="http://localhost:5000/profileImages/{{vendor.image}}">
        <p>
          {{vendor.description}}
        </p>
      </div>
      <div class="item tabs">
        <div class="tab-item">
          0.5 mi
        </div>
        <div class="tab-item rating">
          <i class="ion ion-star" style="color:gold" ng-repeat="n in displayRating(vendor.avgrating, true);"></i>
          <i class="ion ion-star" style="color:#E3E4E6; margin-left:-4px; margin-right: 3px" ng-repeat="n in displayRating(vendor.avgrating);"></i>
        </div>
      </div>
    </div>
  </ion-content>
  <button class="bar bar-footer bar-dark" ng-click="showFilter()">
    <div class="title">Filter</div>
  </button>
</ion-view>
